'use strict';

var format  = require('es5-ext/lib/Date/format')('%m-%d %H:%M:%S').call
  , webmake = require('webmake')

module.exports = function (path) {
	var input, include;
  input = path + '/client/public/main.js'
  include = [path + '/client/tpl'];

	return function (cb) {
		webmake(input, { include: include }, function (err, content) {
			if (err) {
				cb(err);
				return;
			}
			cb(null, content.replace('%%CLIENT_VER%%', format(new Date())));
		});
	};
};
