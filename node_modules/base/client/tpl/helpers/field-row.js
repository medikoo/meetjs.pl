'use strict';

var isArray   = Array.isArray

module.exports = function (id, schema, data, autofocus) {
	var control, row, noLabel, fcontrol;
	control = schema.buildControl(data);
	fcontrol = isArray(control) ?
		(control[0].querySelector('input') || control[0]) : control;
	if (autofocus) {
		fcontrol.autofocus = true;
	}
	fcontrol.id = id + schema.name;
	return tr({ 'class': 'row-' + schema.name + (schema.required ? ' required' :
		'') }, th(label({ 'for': id + schema.name },
			schema.label + ':'),
			schema.hint ? span({ 'class': 'hint' }, schema.hint) : null),
		td(span({ 'class': 'field-wrap' }, control)));
};
