'use strict';

module.exports = function (txt, schema) {
	var count = 1;
	txt = txt.toLowerCase().replace(/\s/g, '').replace(/[^a-z0-9]/g, 'x');
	if (schema[txt]) {
		txt += ++count;
		while (schema[txt]) {
			txt = txt.slice(0, -1) + (++count);
		}
	}
	return txt;
};