'use strict';

module.exports = function (t, a) {
	t = t();
	var n1 = Object.create(t)
	  , n2 = Object.create(t)
	  , n3 = Object.create(t)
	  , n4 = Object.create(t);

	n1.childNodes = [];
	n2.childNodes = [];
	n3.childNodes = [];
	n4.childNodes = [];

	a(n1.appendChild(n2), n2, "appendChild");
	a(n1.firstChild, n2, "appendChild: firstChild");
	a(n1.lastChild, n2, "appendChild: lastChild");
	a(n2.parentNode, n1, "appendChild: parentNode");
	a.deep(n1.childNodes, [n2], "appendChild: childNodes");
	n1.appendChild(n3);
	a.deep(n1.childNodes, [n2, n3], "Second child");
	a(n1.firstChild, n2, "Second child: firstChild");
	a(n1.lastChild, n3, "Second child: lastChild");
	n1.appendChild(n2);
	a.deep(n1.childNodes, [n3, n2], "Reappend: childNodes order");
	a(n2.parentNode, n1, "Reappend: parentNode");
	a(n1.firstChild, n3, "Reappend: firstChild");
	a(n1.lastChild, n2, "Reappend: lastChild");

	a(n1.insertBefore(n4, n2), n4, "insertBefore");
	a.deep(n1.childNodes, [n3, n4, n2], "insertBefore: childNodes order");
	a(n1.removeChild(n4), n4, "removeChild");

	n1.removeChild(n3);
	a(n1.firstChild, n2, "removeChild: firstChild");
	a(n1.lastChild, n2, "removeChild: lastChild");

	n1.appendChild(n3);
	n1.appendChild(n2);

	n2.appendChild(n3);
	a.deep(n1.childNodes, [n2], "Move: from, childNodes");
	a(n3.parentNode, n2, "Move: parentNode");
	a.deep(n2.childNodes, [n3], "Move: to, childNodes");

	n2.removeChild(n3);
	a(n3.parentNode, null, "removeChild: parentNode");
	a.deep(n2.childNodes, [], "removeChild: childNodes");
	a(n2.firstChild, null, "removeChild: firstChild");
	a(n2.lastChild, null, "removeChild: lastChild");
};
