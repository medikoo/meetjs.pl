'use strict';

var merge = require('es5-ext/lib/Object/plain/merge').call

  , DependencyError, x = {};

DependencyError = module.exports = function (id, arg, name, ns) {
	var s, e;
	if (id !== x) {
		e = new DependencyError(x, new Error("Dependency error. " + name + ':' +
			id));
		e.dependencyId = id;
		e.dependencyNs = ns;
		return e;
	}
	merge(this, arg);
	if (this.stack) {
		s = this.stack.indexOf('\n'); e = this.stack.indexOf('\n', s + 1);
		this.stack = this.stack.slice(0, s) + this.stack.slice(e);
	}
};
DependencyError.prototype = new Error();
